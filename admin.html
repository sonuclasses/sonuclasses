<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Sonu Classes</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f4f9; padding: 20px; text-align: center; }
        .admin-box { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 450px; margin: auto; text-align: left; border-top: 5px solid #1976D2;}
        h2 { color: #1976D2; text-align: center; margin-top: 0; }
        label { font-weight: bold; color: #333; display: block; margin-top: 15px; font-size: 15px; }
        input, textarea, select { width: 100%; padding: 12px; margin-top: 8px; border: 2px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 14px; outline: none; transition: 0.3s; font-family: inherit; }
        input:focus, textarea:focus, select:focus { border-color: #1976D2; }
        .save-btn { background: #2E7D32; color: white; padding: 12px; border: none; border-radius: 8px; width: 100%; font-weight: bold; margin-top: 10px; cursor: pointer; font-size: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.2s; }
        .save-btn:active { transform: scale(0.95); }
        .divider { border-top: 2px dashed #ccc; margin: 30px 0; }
        .del-btn { background:#d32f2f; color:white; border:none; padding:10px; border-radius:8px; margin-bottom:15px; cursor:pointer; width:100%; font-weight:bold; }
        .del-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

<div class="admin-box">
    <h2>ЁЯФТ рдЦреВреЮрд┐рдпрд╛ рдПрдбрдорд┐рди рдкреИрдирд▓</h2>
    
    <div style="background: #ffebee; padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center;">
        <h3 style="color:#c62828; margin-top:0;">ЁЯПЖ рд▓реАрдбрд░рдмреЛрд░реНрдб рдХрдВрдЯреНрд░реЛрд▓</h3>
        <p style="font-size:12px; color:#555;">рдЕрдЧрд░ рдХрд┐рд╕реА рдХрд╛ рдирд╛рдо рдЕрдЯрдХ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣рд╛рдБ рд╕реЗ рдкреБрд░рд╛рдирд╛ рд▓реАрдбрд░рдмреЛрд░реНрдб рд╕рд╛реЮ рдХрд░реЗрдВред</p>
        <button class="del-btn" onclick="clearLeaderboard()">ЁЯЧСя╕П рдкреВрд░рд╛ рд▓реАрдбрд░рдмреЛрд░реНрдб рдбрд┐рд▓реАрдЯ рдХрд░реЗрдВ</button>
    </div>

    <div style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
        <label style="margin-top:0; color:#1976D2;">ЁЯУв рдЖрдЬ рдХрд╛ рдиреНрдпреВрдЬрд╝ рдмрджрд▓реЗрдВ:</label>
        <textarea id="news_input" rows="3" placeholder="рдпрд╣рд╛рдБ рдЖрдЬ рдХреА рддрд╛рдЬрд╝рд╛ рдиреНрдпреВрдЬрд╝ рдЯрд╛рдЗрдк рдХрд░реЗрдВ..."></textarea>
        <button class="save-btn" style="background:#1976D2;" onclick="saveNews()">ЁЯТ╛ рдиреНрдпреВрдЬрд╝ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ</button>
    </div>

    <div style="background: #fff3e0; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
        <h3 style="color:#E65100; margin-top:0; text-align:center;">ЁЯУЭ рдСрдирд▓рд╛рдЗрди рдЯреЗрд╕реНрдЯ рдмрдирд╛рдПрдБ</h3>
        <button class="del-btn" onclick="clearQuiz()">ЁЯЧСя╕П рдкрд╣рд▓реЗ рдкреБрд░рд╛рдирд╛ рдЯреЗрд╕реНрдЯ рдбрд┐рд▓реАрдЯ рдХрд░реЗрдВ</button>
        <label style="margin-top:0;">рдирдпрд╛ рд╕рд╡рд╛рд▓ (Question) рдЯрд╛рдЗрдк рдХрд░реЗрдВ:</label>
        <input type="text" id="quiz_q" placeholder="рд╕рд╡рд╛рд▓...">
        <input type="text" id="quiz_a" placeholder="рдСрдкреНрд╢рди A">
        <input type="text" id="quiz_b" placeholder="рдСрдкреНрд╢рди B">
        <input type="text" id="quiz_c" placeholder="рдСрдкреНрд╢рди C">
        <input type="text" id="quiz_d" placeholder="рдСрдкреНрд╢рди D">
        <label style="font-size: 13px;">рд╕рд╣реА рдЬрд╡рд╛рдм рдЪреБрдиреЗрдВ:</label>
        <select id="quiz_ans">
            <option value="A">рд╕рд╣реА рдЬрд╡рд╛рдм: Option A</option>
            <option value="B">рд╕рд╣реА рдЬрд╡рд╛рдм: Option B</option>
            <option value="C">рд╕рд╣реА рдЬрд╡рд╛рдм: Option C</option>
            <option value="D">рд╕рд╣реА рдЬрд╡рд╛рдм: Option D</option>
        </select>
        <button class="save-btn" style="background:#E65100;" onclick="addQuestion()">тЮХ рдпрд╣ рд╕рд╡рд╛рд▓ рдЯреЗрд╕реНрдЯ рдореЗрдВ рдЬреЛреЬреЗрдВ</button>
        <h4 style="margin-bottom:5px; color:#333;">рдЕрднреА рдЯреЗрд╕реНрдЯ рдореЗрдВ рдЬреБреЬреЗ рд╣реБрдП рд╕рд╡рд╛рд▓:</h4>
        <ul id="quiz-list" style="font-size:13px; text-align:left; padding-left:20px; color:#555; margin-top:5px;">
            <li>рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...</li>
        </ul>
    </div>

    <div class="divider"></div>

    <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
        <h3 style="color:#2E7D32; text-align:center; margin-top:0;">ЁЯУЪ PDF рдиреЛрдЯреНрд╕ рдЕрдкрд▓реЛрдб</h3>
        <label>рд╡рд┐рд╖рдп рдФрд░ рд▓реЗрд╕рди рдЪреБрдиреЗрдВ:</label>
        <select id="pdf_chapter_select" onchange="updatePdfInput()">
            <optgroup label="ЁЯФм рд╡рд┐рдЬреНрдЮрд╛рди (Science)">
                <option value="sci_ch1">Lesson 1: рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдЕрднрд┐рдХреНрд░рд┐рдпрд╛рдПрдБ...</option>
                <option value="sci_ch2">Lesson 2: рдЕрдореНрд▓, рдХреНрд╖рд╛рд░рдХ рдПрд╡рдВ рд▓рд╡рдг</option>
            </optgroup>
            <optgroup label="ЁЯУЬ рдЗрддрд┐рд╣рд╛рд╕ (History)">
                <option value="hist_ch1">Lesson 1: рдпреВрд░реЛрдк рдореЗрдВ рд░рд╛рд╖реНрдЯреНрд░рд╡рд╛рдж</option>
                <option value="hist_ch2">Lesson 2: рд╕рдорд╛рдЬрд╡рд╛рдж рдПрд╡рдВ рд╕рд╛рдореНрдпрд╡рд╛рдж</option>
            </optgroup>
            <optgroup label="ЁЯУР рдЧрдгрд┐рдд (Mathematics)">
                <option value="math_ch1">Lesson 1: рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдВрдЦреНрдпрд╛рдПрдБ</option>
            </optgroup>
        </select>
        <label>PDF рд▓рд┐рдВрдХ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ:</label>
        <input type="text" id="pdf_link_input" placeholder="рдпрд╣рд╛рдБ Google Drive рдХрд╛ рд▓рд┐рдВрдХ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ...">
        <button class="save-btn" onclick="savePdfLink()">ЁЯТ╛ рд▓рд┐рдВрдХ рд╕реЗрд╡ рдХрд░реЗрдВ</button>
    </div>
    
    <a href="index.html" style="display:block; text-align:center; color:#1976D2; text-decoration:none; font-weight:bold; padding: 10px; border: 2px solid #1976D2; border-radius: 8px;">ЁЯМР рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреЗ рд╣реЛрдордкреЗрдЬ рдкрд░ рдЬрд╛рдПрдБ</a>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
  import { getDatabase, ref, set, get, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDCzAhpQonWiNDtWmyox5QdPd4xRbpOy30",
    authDomain: "sonuclasses-b19db.firebaseapp.com",
    databaseURL: "https://sonuclasses-b19db-default-rtdb.firebaseio.com",
    projectId: "sonuclasses-b19db",
    storageBucket: "sonuclasses-b19db.firebasestorage.app",
    messagingSenderId: "166740602272",
    appId: "1:166740602272:web:af9131ad8c5e4c8fca08c5"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  let allPdfData = {};

  get(ref(db, 'appData/pdfs')).then((snapshot) => { if (snapshot.exists()) { allPdfData = snapshot.val(); updatePdfInput(); } });
  get(ref(db, 'appData/news')).then((snapshot) => { if (snapshot.exists()) document.getElementById('news_input').value = snapshot.val(); });

  const quizRef = ref(db, 'appData/quizzes');
  onValue(quizRef, (snapshot) => {
      const list = document.getElementById('quiz-list');
      list.innerHTML = '';
      if(snapshot.exists()) {
          let count = 1;
          snapshot.forEach((child) => { list.innerHTML += `<li>${count}. ${child.val().question}</li>`; count++; });
      } else {
          list.innerHTML = '<li>рдЕрднреА рдХреЛрдИ рд╕рд╡рд╛рд▓ рдирд╣реАрдВ рдЬреБреЬрд╛ рд╣реИред</li>';
      }
  });

  window.updatePdfInput = () => {
      const selectedChapter = document.getElementById('pdf_chapter_select').value;
      document.getElementById('pdf_link_input').value = allPdfData[selectedChapter] || "";
  };

  window.savePdfLink = () => {
      const selectedChapter = document.getElementById('pdf_chapter_select').value;
      const linkValue = document.getElementById('pdf_link_input').value;
      if(linkValue.trim() === "") { alert("тЪая╕П рдкрд╣рд▓реЗ рд▓рд┐рдВрдХ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ!"); return; }
      set(ref(db, 'appData/pdfs/' + selectedChapter), linkValue).then(() => { alert("ЁЯОЙ рд▓рд┐рдВрдХ рд╕реЗрд╡ рд╣реЛ рдЧрдпрд╛!"); allPdfData[selectedChapter] = linkValue; });
  };

  window.saveNews = () => {
      const newsText = document.getElementById('news_input').value;
      if(newsText.trim() === "") { alert("тЪая╕П рдкрд╣рд▓реЗ рдиреНрдпреВрдЬрд╝ рдЯрд╛рдЗрдк рдХрд░реЗрдВ!"); return; }
      set(ref(db, 'appData/news'), newsText).then(() => alert("ЁЯОЙ рдиреНрдпреВрдЬрд╝ рдЕрдкрдбреЗрдЯ рд╣реЛ рдЧрдИ!"));
  };

  window.addQuestion = () => {
      const q = document.getElementById('quiz_q').value;
      const a = document.getElementById('quiz_a').value;
      const b = document.getElementById('quiz_b').value;
      if(q.trim() === "" || a.trim() === "" || b.trim() === "") { alert("тЪая╕П рдХреГрдкрдпрд╛ рд╕рд╡рд╛рд▓ рдФрд░ рдХрдо рд╕реЗ рдХрдо 2 рдСрдкреНрд╢рди реЫрд░реВрд░ рдбрд╛рд▓реЗрдВ!"); return; }
      push(ref(db, 'appData/quizzes'), {
          question: q, optionA: a, optionB: b, 
          optionC: document.getElementById('quiz_c').value, 
          optionD: document.getElementById('quiz_d').value, 
          answer: document.getElementById('quiz_ans').value
      }).then(() => {
          alert("ЁЯОЙ рд╕рд╡рд╛рд▓ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЯреЗрд╕реНрдЯ рдореЗрдВ рдЬреБреЬ рдЧрдпрд╛!");
          document.getElementById('quiz_q').value = ''; document.getElementById('quiz_a').value = ''; document.getElementById('quiz_b').value = ''; document.getElementById('quiz_c').value = ''; document.getElementById('quiz_d').value = '';
      });
  };

  window.clearQuiz = () => {
      if(confirm("рдХреНрдпрд╛ рдЖрдк рд╕рдЪ рдореЗрдВ рдкреБрд░рд╛рдирд╛ рдЯреЗрд╕реНрдЯ рдбрд┐рд▓реАрдЯ рдХрд░рдХреЗ рдирдпрд╛ рдЯреЗрд╕реНрдЯ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?")) {
          remove(ref(db, 'appData/quizzes')).then(() => alert("рдкреБрд░рд╛рдирд╛ рдЯреЗрд╕реНрдЯ рдбрд┐рд▓реАрдЯ рд╣реЛ рдЧрдпрд╛! рдЕрдм рдЖрдк рдирдП рд╕рд╡рд╛рд▓ рдЬреЛреЬ рд╕рдХрддреЗ рд╣реИрдВред"));
      }
  };

  // рд▓реАрдбрд░рдмреЛрд░реНрдб рд╕рд╛реЮ рдХрд░рдиреЗ рдХрд╛ рдЬрд╛рджреВ
  window.clearLeaderboard = () => {
      if(confirm("рдХреНрдпрд╛ рдЖрдк рд╕рдЪ рдореЗрдВ рдкреВрд░рд╛ рд▓реАрдбрд░рдмреЛрд░реНрдб рд╕рд╛реЮ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?")) {
          remove(ref(db, 'leaderboard')).then(() => alert("ЁЯОЙ рд▓реАрдбрд░рдмреЛрд░реНрдб рдПрдХрджрдо рдирдпрд╛ (рдЦрд╛рд▓реА) рд╣реЛ рдЧрдпрд╛ рд╣реИ! рдЕрдм рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЬрд╛рдХрд░ рдирдпрд╛ рдЯреЗрд╕реНрдЯ рджреЗрдВред"));
      }
  };
</script>
</body>
</html>
